(()=>{var e={897:e=>{function t(e){return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}))}t.keys=()=>[],t.resolve=t,t.id=897,e.exports=t},905:e=>{function t(e){return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}))}t.keys=()=>[],t.resolve=t,t.id=905,e.exports=t}},t={};function o(n){var a=t[n];if(void 0!==a)return a.exports;var r=t[n]={exports:{}};return e[n](r,r.exports,o),r.exports}o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";const e={};function t(t){const o=t.apiURL??"",n=t.url??o+t.path;if(t.cache){if(n in e)return Promise.resolve(e[n]);e[n]={}}const a={method:t.method??"GET",insecure:!0,headers:{Authorization:t.token?"Basic "+btoa("token:"+t.token):void 0,..."FormData"!=t.body?.constructor?.name&&{"Content-Type":"application/json"}},body:t.body?"FormData"!=t.body?.constructor?.name?JSON.stringify(t.body):t.body:void 0};return new Promise(((o,r)=>{fetch(n,a).then((async a=>{const r=function(e){let t={headers:Object.fromEntries(e.headers)};return["bodyUsed","ok","redirected","status","statusText","type","url"].forEach((o=>t[o]=e[o])),t}(a);r.textBody=await a.text();try{r.jsonBody=JSON.parse(r.textBody)}catch(e){}t.cache&&a.ok&&(e[n]=r),o(r)}))}))}function n(e){let t={searchParams:Object.fromEntries(e.searchParams)};return["hash","host","hostname","href","origin","password","pathname","port","protocol","search","username"].forEach((o=>t[o]=e[o])),t}window.req=t;let a={};"undefined"!=typeof document&&document.documentElement.controllers&&(a=document.documentElement.controllers);const r=async(e,t,n,r="")=>{if(!t&&!e?.url)return{model:{...e??{},url:!0},commands:[{name:"navigate",message:"navigation"}]};if("back"==t?.name)return{model:e,commands:[{name:"navigateBack"}]};if("sessionFail"==t?.name)return{model:e,commands:[{name:"navigate",data:{location:!0,url:"/login"}}]};if("navigation"==t?.name){e.url=t.data,e.controller=null,e.url.hash&&document.querySelector(e.url.hash)?.scrollIntoView();const o=Object.keys(n).sort().reverse();for(const a in o){const r=o[a],s=t.data.pathname.match(new RegExp(n[r].regexp));if(s){s.shift(),t.data.args=Object.fromEntries(n[r].args.map(((e,t)=>[e,s[t]]))),e.controller=n[r].route;break}}if(!e.controller)throw new Error("Not found")}e?.controller&&!a[e.controller]&&("undefined"!=typeof document&&(document.body.classList.add("animate-pulse"),document.body.inert=!0),a[e.controller]=(await o(905)(r+e.controller)).default);const s=a[e?.controller??0]??((e,t)=>({model:e,html:""}));if(!("/root.js"in a))try{const e=await o(897)(r+"/root.js");a["/root.js"]=e.default}catch(e){a["/root.js"]=null}return a["/root.js"]?a["/root.js"](e,t,s):s(e,t)};var s={};function l(e){let t=document.cookie.split(";");for(let o=0;o<t.length;o++){let n=t[o].split("=");if(e==n[0].trim())return decodeURIComponent(n[1])}return null}s.login=async(e,o)=>{const n=await t({path:"/login",method:e?.data?"POST":"GET",body:e?.data});n.ok&&n.jsonBody?.data?.Token&&localStorage.setItem("token",n.jsonBody.data.Token),o({name:e.message,data:n})},s.fetch=async(e,o)=>{const n=await t({...e.data,apiURL:document.documentElement.apiURL,token:l("PHPSESSID")});401==n.status?o({name:"sessionFail",data:n}):e.message&&o({name:e.message,data:n})},s.multiFetch=async(e,o)=>{const n=Object.keys(e.data).map((o=>t({...e.data[o],apiURL:document.documentElement.apiURL,token:l("PHPSESSID")}))),a=await Promise.all(n),r={};for(let t=0;t<a.length;t++)401==a[t].status&&o({name:"sessionFail",data:a[t]}),r[Object.keys(e.data)[t]]=a[t];o({name:e.message,data:r})},s.navigate=async(e,t)=>{e?.data?.location?window.location=e?.data?.url??window.location.href:(e?.data?.url&&("replace"==e.data?.stateAction?window.history.replaceState({},null,e.data.url):(window.history.pushState({},null,e.data.url),window.scrollTo({top:0,left:0,behavior:"smooth"}))),await t({name:e.message??"navigation",data:{...n(new URL(e?.data?.url??"",window.location)),stateAction:e.data?.stateAction??!1}}))},s.refresh=async(e,t)=>{window.history.replaceState({},null,window.location.href),e?.data?.location?window.location=window.location.href:t({name:e.message,data:window.location.href})},s.navigateBack=async(e,t)=>{window.history.back()},s.showModal=(e,t)=>{document.querySelector("dialog").removeAttribute("open"),document.querySelector("dialog").showModal(),e.message&&t({name:e.message,data:e?.data})};const d=s;function c(e,t,o){const n={deletedAttributes:[],addedAttributes:[],changedAttributes:[],deletedChildren:[],addedChildren:[],textChanged:[]};if(3===e.nodeType)e.textContent!=t.textContent&&(n.textChanged.push({before:e.textContent,after:t.textContent}),e.textContent=t.textContent);else{for(const o of e.attributes??[])t.hasAttribute&&!t.hasAttribute(o.name)&&n.deletedAttributes.push({name:o.name,value:o.value});for(const o of t.attributes??[])e.hasAttribute&&!e.hasAttribute(o.name)?n.addedAttributes.push({name:o.name,value:o.value}):e.getAttribute(o.name)!==o.value&&n.changedAttributes.push({name:o.name,value:o.value});const a=Array.from(t.childNodes??[]);for(const t of e.childNodes??[]){let e=!1;for(const n of a)if(!n.matched&&i(t,n)){n.matched=!0,e=!0,t.sortIndex=a.indexOf(n),c(t,n,o);break}e||n.deletedChildren.push(t)}for(const e of a.filter((e=>!e.matched)))e.sortIndex=a.indexOf(e),n.addedChildren.push(e);n.deletedChildren.forEach((e=>e.remove())),e.append(...n.addedChildren),n.deletedAttributes.forEach((t=>e.removeAttribute(t.name))),n.addedAttributes.forEach((t=>e.setAttribute(t.name,t.value))),n.changedAttributes.forEach((t=>{e.setAttribute(t.name,t.value),"value"==t.name&&(e.value=t.value)})),function(e){let t=!0;for(;t;){t=!1;for(let o=1;o<e.childNodes.length;o++){const n=e.childNodes[o],a=e.childNodes[o-1];n.sortIndex<a.sortIndex&&(e.insertBefore(n,a),t=!0)}}}(e)}const a=Object.entries(n).map((e=>({type:e[0],changes:e[1]}))).filter((e=>e.changes.length));a.length&&o&&o(e,a)}function i(e,t){const o=["tagName","nodeName","id"];for(const n of o)if(e[n]!==t[n])return!1;return!0}function m(e,t){if(e.hasAttribute("messages")){e.listeners||(e.listeners=[]),e.listeners.forEach((t=>e.removeEventListener(t.eventName,t.handler)));const o=e.getAttribute("messages");o&&o.split(";").map((e=>({eventName:e.split("=")[0].trim(),name:e.split("=")[1].trim()}))).forEach((o=>{const n=o.eventName.includes("!");o.eventName=o.eventName.replace("!","");const a={eventName:o.eventName,handler:e=>{if(t({name:o.name,data:e}),n)return e.preventDefault(),!1}};e.listeners.push(a),e.addEventListener(a.eventName,a.handler)}))}"A"!=e.tagName||"_blank"==e.getAttribute("target")||e.href.match(/^mailto:|^tel:/g)||e.onclick||(e.onclick=o=>{o.preventDefault(),e.listeners?.filter((e=>"click"==e.eventName)).length||d.navigate({data:{url:o.currentTarget.href,stateAction:o.currentTarget.getAttribute("data-state")},message:o.currentTarget.getAttribute("data-message")??"navigation"},t)})}async function u(e){if((e?.message?.controller??e?.model?.controller??"")!=(e?.model?.controller??""))return;const t=e.controller?await e.controller(e.model,e.message,e.routes,location.protocol+"//"+location.host):{model:e?.model};if(t.html){window.renderCallback&&(t.html=window.renderCallback(t.model,t.html??"")),t.html=t.html.replace(/<!--[\s\S]*?-->/g,"");const n=(new DOMParser).parseFromString(t.html,"text/html").documentElement;c(document.documentElement,n,((t,o)=>{!function(e,t,o){t.filter((e=>"addedChildren"==e.type||e.type.includes("Attributes")&&e.changes.filter((e=>"messages"==e.name)).length)).forEach((t=>{"addedChildren"==t.type?t.changes.filter((e=>1===e.nodeType)).forEach((e=>{m(e,o),e.querySelectorAll("a, [messages]").forEach((e=>m(e,o)))})):m(e,o)}))}(t,o,(t=>u({...e,model:document.documentElement.model,message:t})))})),document.documentElement.DOM||(o=t=>u({...e,model:document.documentElement.model,message:t}),document.querySelectorAll("a, [messages]").forEach((e=>{m(e,o)})),document.documentElement.DOM=!0)}var o;return document.documentElement.model=e.model,(t.commands??[]).filter((e=>e.name)).forEach((o=>{o.controller=t.model.controller,d[o.name](o,(t=>u({...e,message:t})))})),{config:e,state:t}}window.onpopstate=e=>{u({model:document.documentElement.model,controller:r,message:{name:"navigation",data:n(new URL(location))},routes:document.documentElement.routes})},window.localStorage.getItem("model")&&(document.documentElement.model={...document.documentElement.model,...JSON.parse(window.localStorage.getItem("model"))}),window.addEventListener("load",(()=>{u({model:document.documentElement.model,controller:r,routes:document.documentElement.routes})}))})()})();